<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Market Growth/Decay Predictor - Indian Market Analytics</title>
    
    <!-- CSS Frameworks and Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    
    <!-- Plotly.js for advanced charts -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    
    <!-- Custom CSS -->
    <style>
        :root[data-theme="light"] {
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --text-primary: #212529;
            --text-secondary: #6c757d;
            --border-color: #dee2e6;
            --hero-bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --card-bg: #ffffff;
            --navbar-bg: #ffffff;
        }
        
        :root[data-theme="dark"] {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2d2d2d;
            --text-primary: #ffffff;
            --text-secondary: #b0b0b0;
            --border-color: #404040;
            --hero-bg: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            --card-bg: #2d2d2d;
            --navbar-bg: #2d2d2d;
        }
        
        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            font-family: 'Roboto', sans-serif;
            transition: all 0.3s ease;
        }
        
        .navbar {
            background-color: var(--navbar-bg) !important;
            border-bottom: 1px solid var(--border-color);
            backdrop-filter: blur(10px);
        }
        
        .navbar-brand, .nav-link {
            color: var(--text-primary) !important;
        }
        
        .hero-section {
            background: var(--hero-bg);
            padding: 100px 0;
            color: white !important;
        }
        
        .hero-section h1, .hero-section p {
            color: white !important;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .card {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .form-control, .form-select {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
        }
        
        .form-control:focus, .form-select:focus {
            background-color: var(--bg-secondary);
            border-color: #667eea;
            color: var(--text-primary);
            box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
        }
        
        .btn-primary {
            background: var(--hero-bg);
            border: none;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .section-padding {
            padding: 80px 0;
        }
        
        .section-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }
        
        .theme-toggle {
            background: none;
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            border-radius: 50px;
            padding: 8px 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-left: 10px;
        }
        
        .theme-toggle:hover {
            background-color: var(--bg-secondary);
            transform: scale(1.1);
        }
        
        .ai-chat-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .ai-chat-toggle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--hero-bg);
            color: white;
            border: none;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }
        
        .ai-chat-toggle:hover {
            transform: scale(1.1);
        }
        
        .ai-chat-panel {
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 350px;
            height: 500px;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: none;
            flex-direction: column;
        }
        
        .ai-chat-header {
            background: var(--hero-bg);
            color: white;
            padding: 15px;
            border-radius: 15px 15px 0 0;
            font-weight: 600;
        }
        
        .ai-chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            max-height: 350px;
        }
        
        .ai-chat-input {
            padding: 15px;
            border-top: 1px solid var(--border-color);
        }
        
        .message {
            margin-bottom: 15px;
            padding: 10px 15px;
            border-radius: 15px;
            max-width: 80%;
        }
        
        .message.user {
            background: #007bff;
            color: white;
            margin-left: auto;
        }
        
        .message.ai {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }
        
        .info-tooltip {
            position: relative;
            cursor: help;
            color: #007bff;
            margin-left: 5px;
        }
        
        .info-tooltip:hover .tooltip-content {
            display: block;
        }
        
        .tooltip-content {
            display: none;
            position: absolute;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            width: 300px;
            z-index: 1000;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            top: 25px;
            left: -150px;
            color: var(--text-primary);
        }
        
        .bg-light {
            background-color: var(--bg-secondary) !important;
        }
        
        .prediction-form-card {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
        }
        
        .market-overview {
            background-color: var(--bg-secondary);
        }
        
        .feature-card {
            text-align: center;
            padding: 30px 20px;
        }
        
        .feature-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            background: var(--hero-bg);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
        }
        
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            z-index: 9999;
            color: white;
        }
        
        .navbar-toggler {
            border-color: var(--border-color);
        }
        
        .navbar-toggler-icon {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%2833, 37, 41, 0.75%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
        }
        
        [data-theme="dark"] .navbar-toggler-icon {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 0.75%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
        }
        
        .btn-outline-primary {
            color: #007bff;
            border-color: #007bff;
        }
        
        .btn-outline-primary:hover {
            background-color: #007bff;
            border-color: #007bff;
        }
        
        .alert {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
        }
        
        .toast-container .toast {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg sticky-top">
        <div class="container">
            <a class="navbar-brand" href="/dashboard">
                <i class="fas fa-chart-line me-2"></i>
                Stock Market Predictor
            </a>
            <div class="d-flex align-items-center">
                <button class="theme-toggle" onclick="toggleTheme()" title="Toggle Dark/Light Mode">
                    <i class="fas fa-moon" id="themeIcon"></i>
                </button>
                <button class="navbar-toggler ms-2" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
            </div>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#prediction">Prediction</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#charts">Charts</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#top-stocks">Top Stocks</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/portfolio">Portfolio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/news">News</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#about">About</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <h1 class="display-4 fw-bold mb-4">
                        AI-Powered Stock Market Prediction
                    </h1>
                    <p class="lead mb-4">
                        Predict stock prices using advanced machine learning models, technical analysis, 
                        and real-time news sentiment for the Indian stock market.
                    </p>
                    <div class="d-flex gap-3">
                        <button class="btn btn-light btn-lg" onclick="scrollToSection('prediction')">
                            <i class="fas fa-magic me-2"></i>Start Predicting
                        </button>
                        <button class="btn btn-outline-light btn-lg" onclick="scrollToSection('about')">
                            <i class="fas fa-info-circle me-2"></i>Learn More
                        </button>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="hero-chart-container">
                        <canvas id="heroChart" width="400" height="300"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Market Overview -->
    <section class="market-overview py-4">
        <div class="container">
            <div class="row" id="marketIndices">
                <!-- Market indices will be populated here -->
            </div>
        </div>
    </section>

    <!-- Stock Prediction Section -->
    <section id="prediction" class="section-padding">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <h2 class="section-title text-center mb-5">
                        <i class="fas fa-crystal-ball me-2"></i>
                        Stock Price Prediction
                    </h2>
                </div>
            </div>
            
            <div class="row">
                <div class="col-lg-4">
                    <div class="card prediction-form-card h-100">
                        <div class="card-header bg-primary text-white">
                            <h5 class="mb-0">
                                <i class="fas fa-search me-2"></i>
                                Stock Analysis
                            </h5>
                        </div>
                        <div class="card-body">
                            <form id="predictionForm">
                                <div class="mb-3">
                                    <label for="stockInput" class="form-label">Stock Name or Symbol</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="stockInput" 
                                               placeholder="e.g., Reliance, TCS, HDFCBANK" required>
                                        <button class="btn btn-outline-secondary" type="button" id="searchStockBtn">
                                            <i class="fas fa-search"></i>
                                        </button>
                                    </div>
                                    <div class="form-text">Enter company name, stock symbol, or keywords</div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="predictionDays" class="form-label">Prediction Period</label>
                                    <select class="form-select" id="predictionDays">
                                        <option value="5" selected>5 Days</option>
                                        <option value="10">10 Days</option>
                                        <option value="15">15 Days</option>
                                        <option value="30">30 Days</option>
                                    </select>
                                </div>
                                
                                <button type="submit" class="btn btn-primary w-100 mb-3">
                                    <i class="fas fa-chart-line me-2"></i>
                                    Predict Stock Price
                                </button>
                                
                                <button type="button" class="btn btn-outline-primary w-100 mb-3" id="calibrateBtn" style="display: none;">
                                    <i class="fas fa-cogs me-2"></i>
                                    Re-calibrate Model
                                </button>
                            </form>
                            
                            <!-- Quick Stock Buttons -->
                            <div class="quick-stocks">
                                <h6 class="text-muted mb-2">Quick Select:</h6>
                                <div class="d-flex flex-wrap gap-2">
                                    <button class="btn btn-sm btn-outline-primary quick-stock-btn" data-symbol="RELIANCE">RELIANCE</button>
                                    <button class="btn btn-sm btn-outline-primary quick-stock-btn" data-symbol="TCS">TCS</button>
                                    <button class="btn btn-sm btn-outline-primary quick-stock-btn" data-symbol="HDFCBANK">HDFC BANK</button>
                                    <button class="btn btn-sm btn-outline-primary quick-stock-btn" data-symbol="INFY">INFOSYS</button>
                                    <button class="btn btn-sm btn-outline-primary quick-stock-btn" data-symbol="ICICIBANK">ICICI BANK</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-8">
                    <div id="predictionResults" class="d-none">
                        <!-- Stock Info Card -->
                        <div class="card mb-4">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6">
                                        <h5 id="stockName" class="mb-3"></h5>
                                        <div class="stock-price">
                                            <span class="current-price" id="currentPrice"></span>
                                            <span class="price-change" id="priceChange"></span>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="prediction-summary">
                                            <div class="predicted-price mb-2">
                                                <span class="text-muted">Predicted Price</span> <span id="predictionPeriodLabel">(5-day)</span>:
                                                <span class="fw-bold" id="predictedPrice"></span>
                                            </div>
                                            <div class="confidence-score mb-2">
                                                <span class="text-muted">Confidence:</span>
                                                <div class="progress" style="height: 20px;">
                                                    <div class="progress-bar" id="confidenceBar" role="progressbar"></div>
                                                </div>
                                            </div>
                                            <div class="recommendation">
                                                <span class="badge fs-6" id="recommendationBadge"></span>
                                            </div>
                                            <div class="enhanced-recommendation mt-3">
                                                <div id="enhancedRecommendation"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Prediction Chart -->
                        <div class="card mb-4">
                            <div class="card-header">
                                <h6 class="mb-0">
                                    <i class="fas fa-chart-area me-2"></i>
                                    Price Prediction Chart
                                </h6>
                            </div>
                            <div class="card-body">
                                <canvas id="predictionChart" height="300"></canvas>
                            </div>
                        </div>
                        
                        <!-- Analysis Details -->
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card h-100">
                                    <div class="card-header d-flex align-items-center">
                                        <h6 class="mb-0 me-2">
                                            <i class="fas fa-brain me-2"></i>
                                            AI Analysis
                                        </h6>
                                        <i class="fas fa-info-circle info-tooltip">
                                            <div class="tooltip-content">
                                                <strong>AI Analysis Explained:</strong><br>
                                                • <strong>Trend:</strong> Overall market direction<br>
                                                • <strong>Strength:</strong> How strong the trend is<br>
                                                • <strong>Risk Level:</strong> Investment risk assessment<br>
                                                • <strong>Model Used:</strong> AI algorithms employed<br>
                                                • <strong>Data Quality:</strong> Reliability of input data
                                            </div>
                                        </i>
                                    </div>
                                    <div class="card-body">
                                        <div id="aiAnalysis">
                                            <!-- AI analysis details will be populated here -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card h-100">
                                    <div class="card-header d-flex align-items-center">
                                        <h6 class="mb-0 me-2">
                                            <i class="fas fa-newspaper me-2"></i>
                                            Sentiment Analysis
                                        </h6>
                                        <i class="fas fa-info-circle info-tooltip">
                                            <div class="tooltip-content">
                                                <strong>Sentiment Analysis Explained:</strong><br>
                                                • <strong>Overall Sentiment:</strong> Market mood about the stock<br>
                                                • <strong>News Sentiment:</strong> Analysis of recent news<br>
                                                • <strong>Social Sentiment:</strong> Social media opinion<br>
                                                • <strong>Key Themes:</strong> Important discussion topics<br>
                                                • <strong>Sources:</strong> Where data comes from
                                            </div>
                                        </i>
                                    </div>
                                    <div class="card-body">
                                        <div id="sentimentAnalysis">
                                            <!-- Sentiment analysis will be populated here -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Loading State -->
                    <div id="predictionLoading" class="d-none">
                        <div class="card">
                            <div class="card-body text-center py-5">
                                <div class="spinner-border text-primary mb-3" role="status">
                                    <span class="visually-hidden">Loading...</span>
                                </div>
                                <h5>Analyzing Stock Data...</h5>
                                <p class="text-muted">
                                    Processing historical data, technical indicators, and news sentiment.
                                    This may take a few moments.
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Initial State -->
                    <div id="predictionInitial">
                        <div class="card">
                            <div class="card-body text-center py-5">
                                <i class="fas fa-chart-line text-primary mb-3" style="font-size: 3rem;"></i>
                                <h5>Ready to Predict Stock Prices</h5>
                                <p class="text-muted">
                                    Enter a stock name, symbol, or keywords to get started with AI-powered analysis.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Charts Section -->
    <section id="charts" class="section-padding bg-light">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <h2 class="section-title text-center mb-5">
                        <i class="fas fa-chart-bar me-2"></i>
                        Technical Analysis Charts
                    </h2>
                </div>
            </div>
            
            <div class="row">
                <div class="col-12 mb-4">
                    <div class="card">
                        <div class="card-header">
                            <div class="row align-items-center">
                                <div class="col">
                                    <h6 class="mb-0">Chart Analysis</h6>
                                </div>
                                <div class="col-auto">
                                    <select class="form-select form-select-sm" id="chartTypeSelect">
                                        <option value="candlestick">Candlestick</option>
                                        <option value="renko">Renko</option>
                                        <option value="kagi">Kagi</option>
                                        <option value="point_figure">Point & Figure</option>
                                        <option value="breakout">Breakout</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div id="technicalChart">
                                <div class="text-center py-5 text-muted">
                                    <i class="fas fa-chart-area" style="font-size: 2rem;"></i>
                                    <p class="mt-2">Select a stock to view technical charts</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Chart Pattern Analysis -->
            <div class="row" id="chartPatternAnalysis" style="display: none;">
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header d-flex align-items-center">
                            <h6 class="mb-0 me-2">Candlestick Patterns</h6>
                            <i class="fas fa-info-circle info-tooltip">
                                <div class="tooltip-content">
                                    <strong>Candlestick Patterns:</strong><br>
                                    Specific formations in price charts that indicate potential market direction changes or continuations.
                                </div>
                            </i>
                        </div>
                        <div class="card-body" id="candlestickPatterns">
                            <!-- Patterns will be populated here -->
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header d-flex align-items-center">
                            <h6 class="mb-0 me-2">Technical Indicators</h6>
                            <i class="fas fa-info-circle info-tooltip">
                                <div class="tooltip-content">
                                    <strong>Technical Indicators Explained:</strong><br>
                                    • <strong>RSI:</strong> Relative Strength Index (0-100)<br>
                                    • <strong>MACD:</strong> Moving Average Convergence Divergence<br>
                                    • <strong>SMA:</strong> Simple Moving Average<br>
                                    Click on individual indicators for detailed explanations.
                                </div>
                            </i>
                        </div>
                        <div class="card-body" id="technicalIndicators">
                            <!-- Indicators will be populated here -->
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header d-flex align-items-center">
                            <h6 class="mb-0 me-2">Support & Resistance</h6>
                            <i class="fas fa-info-circle info-tooltip">
                                <div class="tooltip-content">
                                    <strong>Support & Resistance:</strong><br>
                                    • <strong>Support:</strong> Price level where buying interest emerges<br>
                                    • <strong>Resistance:</strong> Price level where selling pressure increases<br>
                                    These levels help identify entry and exit points.
                                </div>
                            </i>
                        </div>
                        <div class="card-body" id="supportResistance">
                            <!-- Support/Resistance levels will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Top Stocks Section -->
    <section id="top-stocks" class="section-padding">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <h2 class="section-title text-center mb-5">
                        <i class="fas fa-trophy me-2"></i>
                        Top Performing Stocks
                    </h2>
                </div>
            </div>
            
            <div class="row mb-4">
                <div class="col-12 text-center">
                    <div class="btn-group" role="group">
                        <button type="button" class="btn btn-outline-primary active volatility-btn" data-category="safe">
                            <i class="fas fa-shield-alt me-2"></i>Safe (Low Volatility)
                        </button>
                        <button type="button" class="btn btn-outline-warning volatility-btn" data-category="volatile">
                            <i class="fas fa-chart-line me-2"></i>Moderate Volatility
                        </button>
                        <button type="button" class="btn btn-outline-danger volatility-btn" data-category="highly_volatile">
                            <i class="fas fa-fire me-2"></i>High Volatility
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="row" id="topStocksList">
                <!-- Top stocks will be populated here -->
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="section-padding bg-light">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 mx-auto">
                    <h2 class="section-title text-center mb-5">
                        <i class="fas fa-info-circle me-2"></i>
                        About Our Platform
                    </h2>
                    
                    <div class="row">
                        <div class="col-md-6 mb-4">
                            <div class="feature-card">
                                <div class="feature-icon">
                                    <i class="fas fa-robot"></i>
                                </div>
                                <h5>AI-Powered Predictions</h5>
                                <p>Advanced machine learning models including LSTM, Random Forest, and SVM for accurate price predictions.</p>
                            </div>
                        </div>
                        
                        <div class="col-md-6 mb-4">
                            <div class="feature-card">
                                <div class="feature-icon">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <h5>Multiple Chart Types</h5>
                                <p>Comprehensive technical analysis with Candlestick, Renko, Kagi, Point & Figure, and Breakout charts.</p>
                            </div>
                        </div>
                        
                        <div class="col-md-6 mb-4">
                            <div class="feature-card">
                                <div class="feature-icon">
                                    <i class="fas fa-newspaper"></i>
                                </div>
                                <h5>Sentiment Analysis</h5>
                                <p>Real-time news sentiment analysis to incorporate market sentiment into predictions.</p>
                            </div>
                        </div>
                        
                        <div class="col-md-6 mb-4">
                            <div class="feature-card">
                                <div class="feature-icon">
                                    <i class="fas fa-map-marker-alt"></i>
                                </div>
                                <h5>Indian Market Focus</h5>
                                <p>Specifically designed for NSE and BSE stocks with Indian market dynamics in mind.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="alert alert-warning mt-4">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        <strong>Disclaimer:</strong> This platform is for educational and research purposes only. 
                        Stock predictions are not guaranteed and should not be used as the sole basis for investment decisions. 
                        Always consult with financial advisors and do your own research before investing.
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-dark text-white py-4">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h6>Stock Market Growth/Decay Predictor</h6>
                    <p class="mb-0">AI-powered stock analysis for the Indian market</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="mb-0">&copy; 2025 Stock Market Predictor. All rights reserved.</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- AI Chat Assistant -->
    <div class="ai-chat-container">
        <div class="ai-chat-panel" id="aiChatPanel">
            <div class="ai-chat-header">
                <div class="d-flex justify-content-between align-items-center">
                    <span><i class="fas fa-robot me-2"></i>AI Investment Assistant</span>
                    <button class="btn btn-sm text-white" onclick="toggleAIChat()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="ai-chat-messages" id="aiChatMessages">
                <div class="message ai">
                    <strong>AI Assistant:</strong> Hello! I'm here to help you with stock market questions, investment advice, and platform guidance. Ask me anything!
                </div>
            </div>
            <div class="ai-chat-input">
                <form id="aiChatForm">
                    <div class="input-group">
                        <input type="text" class="form-control" id="aiChatInput" placeholder="Ask me anything...">
                        <button class="btn btn-primary" type="submit">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </form>
            </div>
        </div>
        <button class="ai-chat-toggle" onclick="toggleAIChat()" title="AI Assistant">
            <i class="fas fa-comments"></i>
        </button>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay d-none">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
        <div class="mt-3">Processing...</div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container position-fixed top-0 end-0 p-3">
        <div id="notificationToast" class="toast" role="alert">
            <div class="toast-header">
                <strong class="me-auto" id="toastTitle">Notification</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
            </div>
            <div class="toast-body" id="toastMessage">
                <!-- Toast message will be populated here -->
            </div>
        </div>
    </div>

    <!-- JavaScript Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JavaScript -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    
    <script>
        // Initialize the application when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });
        
        // Theme Management
        function toggleTheme() {
            const html = document.documentElement;
            const themeIcon = document.getElementById('themeIcon');
            
            if (html.getAttribute('data-theme') === 'light') {
                html.setAttribute('data-theme', 'dark');
                themeIcon.className = 'fas fa-sun';
                localStorage.setItem('theme', 'dark');
            } else {
                html.setAttribute('data-theme', 'light');
                themeIcon.className = 'fas fa-moon';
                localStorage.setItem('theme', 'light');
            }
        }

        // Load saved theme
        document.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            const themeIcon = document.getElementById('themeIcon');
            
            document.documentElement.setAttribute('data-theme', savedTheme);
            themeIcon.className = savedTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
        });

        // AI Chat Functions
        function toggleAIChat() {
            const panel = document.getElementById('aiChatPanel');
            if (panel.style.display === 'none' || panel.style.display === '') {
                panel.style.display = 'flex';
            } else {
                panel.style.display = 'none';
            }
        }

        // AI Chat Form Handler
        document.getElementById('aiChatForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const input = document.getElementById('aiChatInput');
            const question = input.value.trim();
            
            if (!question) return;
            
            // Add user message
            addChatMessage(question, 'user');
            input.value = '';
            
            // Show typing indicator
            const messagesContainer = document.getElementById('aiChatMessages');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message ai typing';
            typingDiv.innerHTML = '<em>AI is typing...</em>';
            messagesContainer.appendChild(typingDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            try {
                const response = await fetch('/api/ai-assistant', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ question })
                });
                
                const data = await response.json();
                
                // Remove typing indicator
                typingDiv.remove();
                
                // Add AI response
                addChatMessage(data.response, 'ai');
                
            } catch (error) {
                typingDiv.remove();
                addChatMessage('Sorry, I encountered an error. Please try again.', 'ai');
            }
        });

        function addChatMessage(message, sender) {
            const messagesContainer = document.getElementById('aiChatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            if (sender === 'ai') {
                // Convert markdown-like formatting to HTML
                const formattedMessage = message
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                    .replace(/\*(.*?)\*/g, '<em>$1</em>')
                    .replace(/\n/g, '<br>');
                messageDiv.innerHTML = formattedMessage;
            } else {
                messageDiv.textContent = message;
            }
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
    </script>
</body>
</html>
